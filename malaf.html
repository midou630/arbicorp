<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ø·Ù„Ø¨ ØªØ­ÙˆÙŠÙ„ Ù…Ù„Ù Ø¥Ø¯Ø§Ø±ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
    body{
        font-family: "Cairo", sans-serif;
        background:#eef2f5;
        padding:30px;
    }

    header{
        background:#0b3d91;
        padding:15px;
        color:white;
        text-align:center;
        font-size:22px;
        font-weight:bold;
        border-radius:8px;
        margin-bottom:25px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }

    .container{
        background:#fff;
        padding:30px;
        border-radius:12px;
        width:750px;
        margin:auto;
        box-shadow:0 2px 15px #ccc;
    }

    h2{
        text-align:center;
        color:#0b3d91;
        margin-bottom:20px;
    }

    input, textarea{
        width:100%;
        padding:12px;
        margin:10px 0;
        border:1px solid #ccc;
        border-radius:8px;
        font-size:15px;
        background:#fafafa;
    }

    canvas{
        border:1px solid #333;
        background:#fff;
        border-radius:5px;
        margin-top:10px;
        width:100%;
    }

    .btn{
        background:#0b4b82;
        color:white;
        padding:14px;
        border:none;
        border-radius:8px;
        cursor:pointer;
        width:100%;
        font-size:17px;
        margin-top:15px;
        font-weight:bold;
    }

    .btn:hover{
        background:#093b6a;
    }

    .verify-box{
        margin-top:30px;
        padding:20px;
        border-radius:10px;
        border:2px solid #0b3d91;
        background:#f3f6fb;
    }

    .verify-box h3{
        color:#0b3d91;
        margin-bottom:15px;
        text-align:center;
    }
</style>
</head>

<body>

<header>Ù…Ø­Ø§ÙƒÙŠ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</header>

<div class="container">
    <h2>Ø·Ù„Ø¨ ØªØ­ÙˆÙŠÙ„ Ù…Ù„Ù Ø¥Ø¯Ø§Ø±ÙŠ</h2>

    <label>Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©</label>
    <input type="text" id="university">

    <label>Ø§Ø³Ù… Ø§Ù„ÙƒÙ„ÙŠØ©</label>
    <input type="text" id="faculty">

    <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ</label>
    <input type="text" id="refNumber" readonly>

    <label>ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ…</label>
    <input type="date" id="date">

    <label>Ø¹Ù…ÙŠØ¯ Ø§Ù„ÙƒÙ„ÙŠØ© (Ø§Ù„Ù…Ø±Ø³Ù„)</label>
    <input type="text" id="sender">

    <label>Ø§Ù„ÙƒÙ„ÙŠØ© Ø§Ù„Ù…ÙˆØ¬Ù‡Ø© Ø¥Ù„ÙŠÙ‡Ø§</label>
    <input type="text" id="receiver">

    <label>Ø±Ù‚Ù… Ù‚Ø±Ø§Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ†</label>
    <input type="text" id="decisionNumber">

    <label>ØªØ§Ø±ÙŠØ® Ù‚Ø±Ø§Ø± Ø§Ù„ØªØ¹ÙŠÙŠÙ†</label>
    <input type="date" id="decisionDate">

    <label>Ø§Ø³Ù… Ø§Ù„Ù…ÙˆØ¸Ù</label>
    <input type="text" id="employeeName">

    <label>ØµÙØ© Ø§Ù„Ù…ÙˆØ¸Ù</label>
    <input type="text" id="employeeJob">

    <h3>Ø§Ù„ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</h3>
    <canvas id="signature" width="600" height="200"></canvas>
    <button class="btn" onclick="clearSignature()">Ù…Ø³Ø­ Ø§Ù„ØªÙˆÙ‚ÙŠØ¹</button>

    <!-- ğŸ”µ Ù‚Ø³Ù… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆØ¸Ù -->
    <div class="verify-box">
        <h3>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ù…ÙˆØ¸Ù Ù‚Ø¨Ù„ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</h3>

        <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:</label>
        <input type="text" id="username">

        <label>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ:</label>
        <input type="password" id="password">

        <label>Ø±Ù‚Ù… Ù…Ù…ÙŠØ²:</label>
        <input type="number" id="uniqueCode">
    </div>

    <button class="btn" onclick="generateDocument()">ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©</button>

</div>

<script>
// ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ù…Ø±Ø¬Ø¹ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠ
document.getElementById("refNumber").value = "REF-" + Date.now();

// Ø§Ù„ØªÙˆÙ‚ÙŠØ¹
let canvas = document.getElementById("signature");
let ctx = canvas.getContext("2d");
let drawing = false;

canvas.addEventListener("mousedown", ()=> drawing=true);
canvas.addEventListener("mouseup", ()=> drawing=false);
canvas.addEventListener("mousemove", draw);

function draw(e){
    if(!drawing) return;
    ctx.lineWidth = 3;
    ctx.lineCap = "round";
    ctx.strokeStyle = "#000";
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
}

function clearSignature(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
}

// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø³ÙŠØ·Ø©
const users = {
    "admin":"1234",
    "user1":"pass1",
    "user2":"pass2"
};

// ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©
function generateDocument(){

    let username = document.getElementById("username").value.trim();
    let password = document.getElementById("password").value.trim();
    let uniqueCode = document.getElementById("uniqueCode").value.trim();

    if(!users[username] || users[username] !== password){
        alert("âš ï¸ Ø§Ù„ØªØ­Ù‚Ù‚ ÙØ´Ù„: Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©");
        return;
    }

    if(uniqueCode.length < 4){
        alert("âš ï¸ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù…Ù…ÙŠØ² ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ 4 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„");
        return;
    }

    const signatureImage = canvas.toDataURL();

    const data = {
        university: university.value,
        faculty: faculty.value,
        refNumber: refNumber.value,
        date: date.value,
        sender: sender.value,
        receiver: receiver.value,
        decisionNumber: decisionNumber.value,
        decisionDate: decisionDate.value,
        employeeName: employeeName.value,
        employeeJob: employeeJob.value,
        signatureImage: signatureImage,
        verifiedBy: username,
        uniqueCode: uniqueCode
    };

    localStorage.setItem("docData", JSON.stringify(data));
    window.location.href = "document1.html";
}
</script>

</body>
</html>
