<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>عرض الوثيقة</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
* { font-family: 'Cairo', sans-serif; }
body { background:#e6e6e6; margin:0; padding:0; }
.a4 { width:210mm; min-height:297mm; margin:auto; background:white; padding:25mm; box-shadow:0 0 5px #777; }
.title { text-align:center; font-size:20px; font-weight:bold; margin-bottom:20px; }
table { width:100%; border-collapse:collapse; margin-top:40px; }
td { border:1px solid #000; padding:8px; }
.signature { margin-top:60px; text-align:left; font-size:18px; }
.btn { margin-top:20px; padding:10px 20px; font-size:18px; background:#0b4b82; color:#fff; border:none; border-radius:7px; cursor:pointer; }
</style>
</head>
<body>

<div class="a4" id="documentContainer">
    <div id="content"></div>
    <button class="btn" onclick="window.print()">طباعة / PDF</button>
</div>

<script>
// التحقق من وجود الوثيقة في localStorage
let doc = JSON.parse(localStorage.getItem("selectedDocument") || localStorage.getItem("docData"));

if(!doc){
    alert("❌ لا توجد وثيقة للعرض!");
    location.href = "notifications.html"; // العودة للصفحة السابقة
}

// التاريخ الحالي
let now = new Date().toLocaleString();

// عرض الوثيقة
document.getElementById("content").innerHTML = `
<div class='title'>الجمهورية الجزائرية الديمقراطية الشعبية</div>
<p><b>ولاية:</b> ${doc.wilaya}</p>
<p><b>المكان والتاريخ:</b> ${doc.datePlace}</p>
<p><b>الدائرة:</b> ${doc.daira}</p>
<p><b>البلدية:</b> ${doc.baladia}</p>

<h3 style="text-align:center; margin-top:30px;">جدول إرسال</h3>
<table>
    <tr>
        <td><b>تعيين الوثائق</b></td>
        <td><b>العدد</b></td>
        <td><b>ملاحظات</b></td>
    </tr>
    <tr>
        <td>تجــدون رفقته ...</td>
        <td>03</td>
        <td>لإبداء رأيكم و إفادتنا</td>
    </tr>
    <tr>
        <td><b>المجموع</b></td>
        <td>03</td>
        <td>بموافقتكم</td>
    </tr>
</table>

<p style="margin-top:30px;">رقم مرجعي للوثيقة: <b>${doc.ref}</b></p>

<div class="signature">
    عن السيد رئيس م.ش.ب و بتفويض منه<br>
    <b>رئيس مصلحة: ${doc.serviceChief}</b><br>
    <img src="https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=Signature-${doc.ref}" style="margin-top:10px;">
    <br><br>
    بتاريخ <b>${now}</b> وقعت إلكترونيا من طرف <b>${doc.serviceChief}</b>
</div>
`;
</script>

</body>
</html>
